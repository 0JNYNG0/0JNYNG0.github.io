---
title:  "[Android] RecyclerView ì‚¬ìš©í•´ë³´ê¸°" 
excerpt: "Android Study"

categories:
  - Android
tags:
  - [Android]

toc: true
toc_sticky: true
 
date: 2022-12-21
last_modified_at: 2022-12-21
---
```
í•˜ë‚˜ì”© ì°¨ê·¼ì°¨ê·¼ ê°œì¸ì ìœ¼ë¡œ ê³µë¶€í•œ ê²ƒì„ ê¸°ë¡í•˜ëŠ” ë¸”ë¡œê·¸ì…ë‹ˆë‹¤.
ì°¸ê³ í•˜ì‹œê³  ì˜ëª»ë˜ê±°ë‚˜ ê³ ì³ì•¼ í•  ë¶€ë¶„ì´ ìˆë‹¤ë©´ ì§€ì  ë¶€íƒë“œë¦½ë‹ˆë‹¤!
ì½ì–´ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤ğŸ™‚
```
ì´ ê¸€ì€ RecyclerViewì˜ ì „ì²´ì ì¸ ì‚¬ìš© ë°©ë²•ì˜ íë¦„ì„ ëŒ€ì¶© ì •ë¦¬í•´ë†“ì€ ê¸€ì´ë¯€ë¡œ, ì§„í–‰ ê³¼ì • ì¤‘ì— ë¹ ì§„ ë¶€ë¶„ì´ ê°„í˜¹ ìˆìœ¼ë‹ˆ ì—°ìŠµí•˜ëŠ”ë° ì°¸ê³ ë§Œ í•˜ë„ë¡ í•œë‹¤.
## RecyclerViewë€?
RecyclerViewëŠ” ë§ ê·¸ëŒ€ë¡œ ì¬í™œìš©í•  ìˆ˜ ìˆëŠ” Viewì´ë‹¤.<br>
ê¸°ì¡´ ListViewì—ì„œ ë¦¬ìŠ¤íŠ¸ í•­ëª©ì„ ë‹¤ë£° ë•Œ ì ì€ ì–‘ì˜ ë°ì´í„°ëŠ” ìƒê´€ì´ ì—†ì§€ë§Œ, ë§Œì•½ ì—„ì²­ ë§ê³  ë°©ëŒ€í•œ ì–‘ì˜ ë°ì´í„°ë¥¼ ë‹¤ë¤„ì•¼ í•œë‹¤ë©´ RecyclerViewê°€ ê¼­ í•„ìš”í•˜ë‹¤. RecyclerViewë¥¼ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ”ë‹¤ë©´ AndroidëŠ” ë°©ëŒ€í•œ ì–‘ì˜ ë°ì´í„°ë¥¼ í•œ ë²ˆì— ê·¸ë¦¬ê³ ì ì‹œë„í•  ê²ƒì´ê³  ê·¸ ê²°ê³¼ ì•±ì€ ëŠë ¤ì§€ê±°ë‚˜ ì£½ê²Œë  ê²ƒì´ë‹¤.<br>

RecyclerViewëŠ” ì´ëŸ¬í•œ ë‹¨ì ì„ ë³´ì™„í•˜ê¸° ìœ„í•´ ë“±ì¥í–ˆê³ , Android í™”ë©´ ê¸°ì¤€ ìœ„ ì•„ë˜ ê°ê° ëª‡ ê°œì˜ ì•„ì´í…œë§Œ ë” ì¶”ê°€ë˜ëŠ” ì ì€ ì–‘ì˜ ë·°í™€ë”ë¥¼ ë‹¤ë£¬ë‹¤. ìš°ë¦¬ê°€ ìŠ¤í¬ë¡¤ì„ ì•„ë˜ë¡œ ë‚´ë¦´ ë•Œ ìœ„ë¡œ ì˜¬ë¼ê°€ì„œ ë”ì´ìƒ ëˆˆì— ì•ˆë³´ì´ê²Œ ëœ ë·°ë“¤ì€ ì—†ì–´ì§€ê³  ìš°ë¦¬ê°€ ë‚´ë¦¬ê³  ìˆëŠ” ì•„ë˜ ì§„í–‰ ë°©í–¥ ë¶€ë¶„ì— ìœ„ì—ì„œ ì•ˆë³´ì´ê²Œ ëœ ë·°ë“¤ì„ ì¬ì‚¬ìš©í•˜ê²Œ ëœë‹¤.
<br>

RecyclerViewëŠ” ViewHolderë¥¼ ì¬í™œìš©í•˜ëŠ” ListViewì˜ ê°œì„ ëœ ë²„ì „ì´ë‹¤.<br>
ViewHolderëŠ” Dataê°€ ë‹´ê¸¸ ë°”êµ¬ë‹ˆë¥¼ ì˜ë¯¸í•œë‹¤.<br>
<br>
ì´ì œ RecyclerViewë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” LayoutManagerì™€ Adapterê°€ í•„ìš”í•˜ë‹¤. Adapterì—ì„œëŠ” ViewHolderì™€ ê´€ë ¨ëœ ë¡œì§ì„ êµ¬í˜„í•  ê²ƒì´ê³ , LayoutManagerëŠ” ì–´ë–¤ì‹ìœ¼ë¡œ ë°ì´í„°ë“¤ì„ ë‚˜ì—´í• ì§€ ê´€ë¦¬í•´ì£¼ëŠ” ì—­í• ì„ í•œë‹¤.

## ViewHolderë€?
ViewHolderëŠ” ê° ë·°ë“¤ì„ ë³´ê´€í•´ì£¼ëŠ” ê°ì²´ì´ë‹¤.<br>
ê° ë·°ë¥¼ ë³´ì—¬ì£¼ê¸°(inflate) ìœ„í•´ findViewByIdë¥¼ ì‚¬ìš©í•˜ëŠ”ë°, ê³„ì† ì´ë¥¼ ë¹ˆë²ˆí•˜ê²Œ ì‚¬ìš©í–ˆì„ ê²½ìš° ì„±ëŠ¥ì´ ì €í•˜ëœë‹¤ëŠ” ë‹¨ì ì„ ë³´ì™„í•˜ê¸° ìœ„í•´ ì €ì¥í•´ë‘ê³  ë°”ë¡œ ë°”ë¡œ ì¬ì‚¬ìš©í•˜ëŠ” ë°©ì‹ì„ ì‚¬ìš©í•œë‹¤.
<br>

- ViewHolder ê´€ë ¨ ì˜¤ë²„ë¼ì´ë“œ í•¨ìˆ˜
    - onCreateViewHolder()<br>
    ìƒˆë¡œìš´ Viewë¥¼ ìƒì„±í•˜ë©´ì„œ ì‹¤í–‰ì´ ë˜ê³  ViewHolderë¥¼ ë¦¬í„´í•´ì¤€ë‹¤.
    - onBindViewHolder()<br>
    ì¼ë°˜ì ìœ¼ë¡œ ViewHolder innerí´ë˜ìŠ¤ ë‚´ bindí•¨ìˆ˜ë¥¼ ì´ìš©í•´ì„œ ViewHolderì˜ ë‚´ìš©(ë°ì´í„°)ë¥¼ ë³€ê²½í•´ì¤€ë‹¤.

## LayoutManagerë€?
LayoutManagerëŠ” ì•„ì´í…œ ë·°ë“¤ì´ ê°ê° ë‚˜ì—´ë˜ëŠ” ì „ì²´ì ì¸ í˜•íƒœë¥¼ ê´€ë¦¬í•´ì¤€ë‹¤.<br>
í™”ë©´ì— í‘œì‹œë˜ëŠ” ë·° ë§ê³ ë„ í‘œì‹œë˜ì§€ ì•Šì€ ë·°ë“¤ì„ ì–¸ì œ ì¬í™œìš© í• ì§€ë„ ê²°ì •í•´ì¤€ë‹¤.<br>

- ë·° ë°°ì¹˜ ì¢…ë¥˜
    - LinearLayoutManager : ìˆ˜í‰ or ìˆ˜ì§ ë°©í–¥
    - GridLayoutManager : ê²©ì í˜•íƒœ
    - StaggeredGridLayoutManager : ì—‡ê°ˆë¦° ê²©ì í˜•íƒœ(ì§€ê·¸ì¬ê·¸)


## RecyclerView Adapter í´ë˜ìŠ¤ ë§Œë“¤ê¸°
ViewHolderì— ëŒ€í•œ ë¡œì§ì„ ì‘ì„±í•˜ê³  ë‚˜ì¤‘ì— RecyclerView ì–´ëŒ‘í„°ì™€ ì—°ê²°í•´ì¤„ BookAdapter(ì˜ˆì‹œ) íŒŒì¼ì„ í•˜ë‚˜ ë§Œë“¤ì–´ì£¼ì.<br>
[ adapterí´ë” > BookAdapter.kt ]<br>

```kotlin
class BookAdapter: ListAdapter<Book, BookAdapter.BookItemViewHolder>(diffUtil) {
		
    inner class BookItemViewHolder(private val binding: ItemBookBinding): RecyclerView.ViewHolder(binding.root) {	
        fun bind(bookModel: Book) {
            binding.titleTextView.text = bookModel.title
            binding.descriptionTextView.text = bookModel.description

            Glide.with(binding.coverImageView.context) // Viewì— contextê°€ ì¡´ì¬í•¨
                .load(bookModel.coverSmallUrl)
                .into(binding.coverImageView)
        }
    }

    override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): BookItemViewHolder {
        return BookItemViewHolder(ItemBookBinding.inflate(LayoutInflater.from(parent.context), parent, false))
    }
    override fun onBindViewHolder(holder: BookItemViewHolder, position: Int) {
        holder.bind(currentList[position])
    }

    companion object {
        val diffUtil = object: DiffUtil.ItemCallback<Book>() {
            override fun areItemsTheSame(oldItem: Book, newItem: Book): Boolean {
                return oldItem.id == newItem.id
            }
            override fun areContentsTheSame(oldItem: Book, newItem: Book): Boolean {
                return oldItem == newItem
            }
        }
    }
}
```

ë§Œë“¤ì–´ì¤€ ì–´ëŒ‘í„° í´ë˜ìŠ¤ëŠ” ListAdapter ìƒì†ì„ ë°›ê³  ListAdapter<> ì•ˆì— ì•„ì´í…œë“¤ì˜ ë°ì´í„°ë¥¼ ë‹¤ë£° ë°ì´í„° í´ë˜ìŠ¤ì™€ inner classë¡œ ìƒì„±í•  ViewHolder í´ë˜ìŠ¤ë¥¼ ì‘ì„±í•´ì¤€ë‹¤. ìœ„ ì½”ë“œë¥¼ ì°¸ê³ í•´ì„œ ê°™ì€ ë¼ˆëŒ€ë¡œ ì‘ì„±í•´ì£¼ë©´ ëœë‹¤.<br>
diffUtil ë¶€ë¶„ì— ì˜¤ë²„ë¼ì´ë“œ í•¨ìˆ˜ì¸ areItemsTheSameì€ RecyclerViewì— í˜„ì¬ ë…¸ì¶œë˜ì–´ ìˆëŠ” ì•„ì´í…œê³¼ ìƒˆë¡­ê²Œ ì¬í™œìš©í•  ì•„ì´í…œì´ ê°™ì€ì§€ í™•ì¸í•˜ëŠ” í•¨ìˆ˜ì´ê³  ë³´í†µ ë°ì´í„°ì˜ ê° ê³ ìœ í•œ ê°’ìœ¼ë¡œ ë¹„êµí•œë‹¤. areContentsTheSame í•¨ìˆ˜ëŠ” ë…¸ì¶œë˜ì–´ ìˆëŠ” ì•„ì´í…œê³¼ ìƒˆë¡œìš´ ì•„ì´í…œì´ ê°™ì€ì§€ equalsë¥¼ í™•ì¸í•˜ëŠ” í•¨ìˆ˜ì´ë‹¤.<br>

ê·¸ë¦¬ê³  ìœ„ ì½”ë“œì˜ ë°ì´í„° í´ë˜ìŠ¤ Bookì€ ì•„ë˜ ì½”ë“œì™€ ê°™ì´ ë·° ì•„ì´í…œì— ë„£ì–´ì¤„ ì •ë³´ë¥¼ ì €ì¥í•´ì¤€ë‹¤.

```kotlin
data class Book(
    @SerializedName("itemId") val id: Long,
    @SerializedName("title") val title: String,
    @SerializedName("description") val description: String,
    @SerializedName("coverSmallUrl") val coverSmallUrl: String
)
```
<br><br>
ê·¸ë¦¬ê³  inner classë¡œ ViewHolder í´ë˜ìŠ¤ë¥¼ í•˜ë‚˜ ì‘ì„±í•´ì£¼ê³  ì´ê³³ì—ì„œ bindí•¨ìˆ˜ë¥¼ ì‘ì„±í•´ì¤„ ê²ƒì´ë‹¤. bindí•¨ìˆ˜ëŠ” ë·°ì— ë°ì´í„°ë¥¼ ì—®ì–´ì£¼ëŠ” ì—­í• ì„ í•˜ëŠ” í•¨ìˆ˜ë¼ê³  ë³´ë©´ ëœë‹¤.<br>

```kotlin
inner class BookItemViewHolder(private val binding: ItemBookBinding): RecyclerView.ViewHolder(binding.root) {	
    fun bind(bookModel: Book) {
        
    }
}
```
inner class ë·°í™€ë” ë§¤ê°œë³€ìˆ˜ë¥¼ ë³´ë©´ ItemBookBindingì´ ìˆëŠ”ë° ì´ëŠ” ViewBindingì„ ì‚¬ìš©í•œ ê²ƒì´ê³ , item_book.xml ë ˆì´ì•„ì›ƒ íŒŒì¼ì„ ì•„ì´í…œ ë·°ì˜ ëª¨ì–‘ìœ¼ë¡œ í™œìš©í•˜ëŠ” ê²ƒì´ë‹¤.
ì›í•˜ëŠ” RecyclerViewì˜ ë¦¬ìŠ¤íŠ¸ ì•„ì´í…œì˜ ëª¨ì–‘ì„ ë§Œë“¤ì–´ì£¼ê³  ì´ì²˜ëŸ¼ ë·°ë°”ì¸ë”©ìœ¼ë¡œ ê°„í¸í•˜ê²Œ ì‚¬ìš©í•´ì£¼ë©´ ëœë‹¤.
<br><br><br><br><br>

ì´ì œ ListAdapterì˜ ì˜¤ë²„ë¼ì´ë“œ í•¨ìˆ˜ë“¤ì„ ë³´ì.<br>
```kotlin
override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): BookItemViewHolder {
    return BookItemViewHolder(ItemBookBinding.inflate(LayoutInflater.from(parent.context), parent, false)
}
override fun onBindViewHolder(holder: BookItemViewHolder, position: Int) {
    holder.bind(currentList[position])
}
```
- onCreateViewHolder
    - ì—¬ê¸°ì„œëŠ” BookItemViewHolderë¼ëŠ” ë·°í™€ë” inner classë¥¼ ë¦¬í„´í•´ì£¼ê³  ìˆë‹¤. ì´ëŠ” ItemBookBinding.inflate()ë¡œ ì•ì„œ ì–¸ê¸‰í•œ item_book.xml í˜•íƒœì— ë§ê²Œ ê·¸ë¦° ëª¨ì–‘ì˜ ë·°í™€ë”ë¥¼ í•˜ë‚˜ ìƒì„±í•´ì¤€ë‹¤ëŠ” ì˜ë¯¸ì´ë‹¤.
- onBindViewHolder
    - ìš°ë¦¬ëŠ” BookItemViewHolderë¼ëŠ” inner classì— ë°ì´í„°ë¥¼ ì—®ì–´ì£¼ëŠ” bindí•¨ìˆ˜ë¥¼ ë§Œë“¤ì—ˆì—ˆë‹¤. ì´ê³³ì—ì„œ í•´ë‹¹ bindí•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ê³  ì¸ìê°’ìœ¼ë¡œ ìœ„ì¹˜ì— ë§ëŠ” currentList ê°’ì„ ì „ë‹¬í•´ì¤€ë‹¤. currentListëŠ” ListAdapterì—ì„œ ë§Œë“¤ì–´ì§€ëŠ” ë¦¬ìŠ¤íŠ¸ë¡œ ë°”ë¡œ ìœ„ì²˜ëŸ¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.
<br><br><br><br><br>

ë§ˆì§€ë§‰ìœ¼ë¡œ companion objectë¡œ ê°ì‹¸ì¤€ diffUtilì´ ì–´ë–¤ ì—­í• ì„ í•˜ëŠ”ì§€ ì•Œì•„ë³´ì. ê¼­ companion objectê°€ ì•„ë‹Œ ë”°ë¡œ ë§Œë“¤ì–´ì¤˜ë„ ë¬´ë°©í•˜ë‹¤.<br>
```kotlin
companion object {
    val diffUtil = object: DiffUtil.ItemCallback<Book>() {
        override fun areItemsTheSame(oldItem: Book, newItem: Book): Boolean {
            return oldItem == newItem
        }
        override fun areContentsTheSame(oldItem: Book, newItem: Book): Boolean {
            return oldItem.id == newItem.id
        }
    }
}
```
diffUtilì€ DiffUtil.ItemCallback<ë°ì´í„°í´ë˜ìŠ¤ëª…>ì˜ ì˜¤ë¸Œì íŠ¸ ëŒë‹¤ í•¨ìˆ˜ë¡œ ë§Œë“¤ì–´ì£¼ê³ , ë°ì´í„°í´ë˜ìŠ¤ëª…ì€ ìœ„ì—ì„œ ë§Œë“¤ì–´ë†“ì€ Bookê³¼ ê°™ì´ ì•„ì´í…œì˜ ë°ì´í„° í´ë˜ìŠ¤ëª…ì„ ë„£ì–´ì¤€ë‹¤. ì˜¤ë²„ë¼ì´ë“œ í•¨ìˆ˜ 2ê°œë¥¼ ê°€ì§€ëŠ”ë° ì´ëŠ” RecyclerView ì•„ì´í…œ, ì»¨í…ì¸ ë“¤ì„ êµ¬ë¶„í•´ì£¼ëŠ” ì—­í• ì„ í•œë‹¤.<br><br>
ê°ê° areItemsTheSame í•¨ìˆ˜ëŠ” ì•„ì´í…œì´ ê°™ì€ì§€, areContentsTheSame í•¨ìˆ˜ëŠ” ì•„ì´í…œì˜ ì»¨í…ì¸ ê°€ ì„œë¡œ ê°™ì€ì§€ íŒë³„í•´ì£¼ëŠ” ì—­í• ì„ í•˜ë©°, ì´ë¥¼ í† ëŒ€ë¡œ RecyclerViewëŠ” ì•„ì´í…œì„ ì¶”ê°€í• ì§€, ì—…ë°ì´íŠ¸í• ì§€, ì‚­ì œí• ì§€ ë“±ë“± íŒë‹¨ì„ í•˜ê²Œ ëœë‹¤.
<br><br><br><br>

## RecyclerView ì–´ëŒ‘í„° ì—°ê²°
ì–´ëŒ‘í„° í´ë˜ìŠ¤ ì‘ì„±ì„ ë§ˆì³¤ë‹¤ë©´, ì•¡í‹°ë¹„í‹°ì—ì„œ ì–´ëŒ‘í„° ì—°ê²°ì„ í•´ì£¼ì.<br>

```kotlin
private lateinit var binding: ActivityMainBinding
private lateinit var adapter: BookAdapter

override fun onCreate(savedInstanceState: Bundle?) {
    super.onCreate(savedInstanceState)
    binding = ActivityMainBinding.inflate(layoutInflater)
    setContentView(binding.root)

    adapter = BookAdapter()
    binding.bookRecyclerView.layoutManager = LinearLayoutManager(this)
    binding.bookRecyclerview.adapter = adapter

}
```
ì „ì—­ë³€ìˆ˜ë¡œ BookAdapterì— ëŒ€í•œ ì–´ëŒ‘í„° ë³€ìˆ˜ë¥¼ í•˜ë‚˜ ë§Œë“¤ê³  ê°ì²´ë¥¼ í• ë‹¹í•´ì£¼ì. ê·¸ë¦¬ê³  ìš°ë¦¬ê°€ RecyclerViewë¡œ í™œìš©í•  ë·°ì— ì ‘ê·¼í•˜ì—¬ layoutManagerì— ëŒ€í•œ ê°’ì„ (Linear|Grid|StaggeredGrid)Layout ì¤‘ ì›í•˜ëŠ” ê²ƒì„ ì ìš©ì‹œì¼œì£¼ë©´ ëœë‹¤. ë§ˆì§€ë§‰ìœ¼ë¡œ RecyclerViewì˜ adapterì— ì ‘ê·¼í•˜ì—¬ ë„£ì–´ì¤„ ê°’ìœ¼ë¡œ ì•ì„œ ë§Œë“  BookAdapter ê°ì²´ ë³€ìˆ˜ ê°’ì„ ëŒ€ì…í•´ì£¼ë©´ ì–´ëŒ‘í„° ì—°ê²°ì´ ëë‚œë‹¤.
<br><br>
ìœ„ ì˜ˆì‹œì˜ ì½”ë“œë“¤ì€ ì„œë²„ API í†µì‹ ì„ ê±°ì¹˜ê³  ë°ì´í„°ë¥¼ ë°›ì•„ì˜¨ ë’¤ adapter.submitList()ë¥¼ ì´ìš©í•´ RecyclerViewì˜ ì•„ì´í…œ ì—…ë°ì´íŠ¸ë¥¼ ì§„í–‰í–ˆë‹¤.
<br><br><br><br>